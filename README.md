# Travel Social Network

System Design социальной сети для курса по [System Design](https://balun.courses/courses/system_design).


## Scope refinement:

 * публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
 * оценка и комментарии постов других путешественников;
 * подписка на других путешественников, чтобы следить за их активностью;
 * поиск популярных мест для путешествий и просмотр постов с этих мест;
 * просмотр ленты других путешественников;


## Функциональные требования:

* Публикация постов:
  * Пользователи могут публиковать посты с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия.
  * Поддержка геолокации для привязки постов к местам.
  * Возможность редактирования и удаления постов.

* Оценка и комментарии:
  * Пользователи могут ставить лайки и оставлять комментарии к постам других пользователей.
  * Система уведомлений о новых реакциях и комментариях.

* Подписка на других пользователей:
  * Пользователи могут подписываться на других путешественников для отслеживания их активности.
  * Система уведомлений о новых постах от подписок.

* Поиск и просмотр популярных мест:
  * Возможность поиска популярных мест для путешествий.
  * Просмотр постов, связанных с конкретными местами.

* Лента активности:
  * Просмотр ленты постов от подписок и популярных постов.
  * Фильтрация ленты по различным критериям (например, по времени, популярности).


## Нефункциональные требования:

#### Аудитория приложения 

* Количество пользователей: 10 000 000 DAU.
  * Поведение пользователей: 
    * Публикация постов, оценка и комментарии, подписка на других пользователей, поиск и просмотр постов.
    * Среднее количество действий пользователя в день:
      * Публикация постов: 1.
      * Загруженные фото к посту: 5.
      * Реакции: 15.
      * Комментарии: 5.
 * Регионы использования приложения: Только на СНГ.

#### Особенности приложения 

 * Сезонности в приложении: Повышенная активность во время летних и зимних каникул, праздников и выходных дней.
 * Условия хранения данных: Храним всегда.
 * Лимиты и ограничения:
   * Максимальный размер поста: 10 МБ.
   * Максимальный размер фотографии: 5 МБ.
   * Максимальное количество реакций на пост: не ограничено.
   * Максимальное количество комментариев на пост: не ограничено.
 * Временные ограничения:
   * Время ответа на запросы:
     * Публикация поста: < 2 секунды.
     * Загрузка ленты: < 2 секунда.
     * Загрузка фотографий: < 3 секунда.
     * Оценка и комментарии: < 1 секунда.
 * Доступность приложения: Не более, чем несколько часов простоя в год.


## Оценка нагрузки

#### Трафик

  * **MAU**: 10M * 30 = 300M
  * **DAU**: 10M

Предположим, что **на пользователя в день среднее количество**:
   * **постов:** 1
   * **фотографий:** 5
   * **реакций:** 15
   * **комментариев:** 5

Предположим, что **общее количество**:
   * **постов:** 1 * 10M = 10M
   * **фотографий:** 5 * 10M = 50M
   * **реакций:** 15 * 10M = 150M
   * **комментариев:** 5 * 10M = 50M

#### Запросы (load)

**Posts**

$$\frac{10.000.000}{86.400секунд}=116RPS$$

**Media content**

$$\frac{50.000.000}{86.400секунд}=579RPS$$

**Reactions**

$$\frac{150.000.000}{86.400секунд}=1.732RPS$$

**Comments**

$$\frac{50.000.000}{86.400секунд}=579RPS$$

#### Сетевая нагрузка

Предположим, что:
- **Размер одного поста**: 10 MB
- **Размер одной фотографии**: 5 MB
- **Размер одной реакции**: 50 байт
- **Размер одного комментария**: 600 байт

**Posts**

$$10M×10MB=100TB$$

**Media content**

$$50M×5MB=250TB$$

**Reactions**

$$150M×50byte=7,2GB$$

**Comments**

$$50M×600byte=28,7GB$$

**Common**

$$100TB+250TB+7,2GB+28,7GB=100TB+250TB+0.007TB+0.028TB=350.035TB$$
